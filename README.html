<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Bashmatic‚Ñ¢ ‚Äî BASH primitives for humans, and for fun.</title>
<style>
@import url(//cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #111111; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #ad141e; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #ad141e; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Arial, sans-serif; font-weight: normal; font-style: normal; color: #111111; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #5e5e5e; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Andale Mono", "monotype.com", "Lucida Console", monospace; font-weight: normal; color: #222222; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.5; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.2; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; padding: 2px; white-space: nowrap; background-color: #eeeeee; border: 0 solid #dddddd; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

pre, pre > code { line-height: 1.5; color: white; font-family: Monaco, Consolas, "Courier New", Courier, Sans-serif; font-weight: normal; }

kbd.keyseq { color: #555555; }

kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

p a > code:hover { color: #151515; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }

#toctitle { color: #111111; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }

#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", sans-serif; font-size: 1em; padding-left: 0.125em; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.35; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #111111; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #040404; }

.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #111111; margin-top: 0; line-height: 1.5; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock > .content pre, .listingblock > .content pre { background: #333333; border-width: 0; padding: 10px; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }

.listingblock > .content { position: relative; }

.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }

.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }

table.pyhltable { border: 0; margin-bottom: 0; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }

th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }

th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .8em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.qanda > ol > li > p > em:only-child { color: #96111a; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #ad141e; color: #820f16; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

</style>
</head>
<body class="article data-line-1">
<div id="header">
<h1>Bashmatic‚Ñ¢ ‚Äî BASH primitives for humans, and for fun.</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_project_motivation">1. Project Motivation</a></li>
<li><a href="#_three_examples_to_showcase_bashmatic">2. Three Examples to Showcase Bashmatic</a>
<ul class="sectlevel2">
<li><a href="#_install_gems_via_homebrew">2.1. Install Gems via Homebrew</a></li>
<li><a href="#_download_and_install_binaries">2.2. Download and install binaries.</a></li>
<li><a href="#_developer_environment_bootstrap_script">2.3. Developer Environment Bootstrap Script</a></li>
</ul>
</li>
<li><a href="#_installing_bashmatic">3. Installing Bashmatic</a>
<ul class="sectlevel2">
<li><a href="#_bootstrapping_bashmatic_using_curl">3.1. Bootstrapping <em>Bashmatic¬Æ</em> using <code>curl</code></a></li>
<li><a href="#_installing_manually">3.2. Installing Manually</a></li>
</ul>
</li>
<li><a href="#_usage">4. Usage</a>
<ul class="sectlevel2">
<li><a href="#_function_naming_convention_unpacked">4.1. Function Naming Convention Unpacked</a></li>
<li><a href="#_seeing_all_functions">4.2. Seeing All Functions</a></li>
<li><a href="#_seeing_specific_functions">4.3. Seeing Specific Functions</a></li>
<li><a href="#_various_modules">4.4. Various Modules</a></li>
<li><a href="#_key_modules_explained">4.5. Key Modules Explained</a></li>
</ul>
</li>
<li><a href="#_how_to">5. How To&#8230;&#8203;</a>
<ul class="sectlevel2">
<li><a href="#_write_new_dsl_in_the_bashmatic_style">5.1. Write new DSL in the <em>Bashmatic¬Æ</em> Style</a></li>
<li><a href="#_how_can_i_test_if_the_function_was_ran_as_part_of_a_script_or_sourced_in">5.2. How can I test if the function was ran as part of a script, or "sourced-in"?</a></li>
<li><a href="#_how_do_i_run_unit_tests_for_bashmatic">5.3. How do I run unit tests for Bashmatic?</a></li>
<li><a href="#_how_can_i_change_the_underscan_or_overscan_for_an_old_monitor">5.4. How can I change the underscan or overscan for an old monitor?</a></li>
<li><a href="#_contributing">5.5. Contributing</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph data-line-7">
<p><span class="image"><a class="image" href="https://travis-ci.org/kigster/bashmatic"><img src="https://travis-ci.org/kigster/bashmatic.svg?branch=master" alt="Build Status"></a></span>
<span class="image"><img src="https://github.com/kigster/bashmatic/workflows/CI/badge.svg" alt="CI"></span></p>
</div>
<div class="paragraph data-line-10">
<p>NOTICE:</p>
</div>
<div class="exampleblock data-line-11">
<div class="content">
<div class="ulist data-line-12">
<ul>
<li class="data-line-12">
<p><em>Bashmatic¬Æ</em> is a collection of BASH convenience functions that make BASH programming fun (again? forever? always?).</p>
</li>
<li class="data-line-14">
<p>You can also download the <a href="https://raw.githubusercontent.com/kigster/bashmatic/master/README.pdf">PDF version of this document</a> which is better for print.</p>
</li>
<li class="data-line-16">
<p>Additionally please checkout the <a href="https://raw.githubusercontent.com/kigster/bashmatic/master/CHANGELOG.md">CHANGELOG</a> and the <a href="https://raw.githubusercontent.com/kigster/bashmatic/master/LICENSE">LICENSE</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph data-line-19">
<p><em>Bashmatic¬Æ</em> is an ever-growing framework of Bash Script runners, auto-retrying, repeatable, DSL-controlled functions for every occasion, from drawing boxes, lines, headers, to showing progress bars, getting user input, and more.</p>
</div>
<div class="paragraph data-line-21">
<p><strong><em>Bashmatic¬Æ</em> is meant to be used primarily with Mac OS-X, although some functions will also work under Linux.</strong>.</p>
</div>
<div class="paragraph data-line-23">
<p>Start exploring <em>Bashmatic¬Æ</em> below with our examples section. When you are ready, the complete entire set of pubic functions (nearly 500 of those) can be found in the <a href="FUNCTIONS.html">functions index page</a>.</p>
</div>
<div class="paragraph data-line-25">
<p>And, finally, don&#8217;t worry, <strong><em>Bashmatic¬Æ</em></strong> is totally open source and free to use and extend. We just like the way it looks with a little <strong>¬Æ</strong> üòÇ.</p>
</div>
</div>
</div>
<div class="sect1 data-line-27">
<h2 id="_project_motivation">1. Project Motivation</h2>
<div class="sectionbody">
<div class="paragraph data-line-29">
<p>This project was born out of a simple realization made by several very senior and highly experienced engineers, that:</p>
</div>
<div class="ulist data-line-31">
<ul>
<li class="data-line-31">
<p>It is often easier to use BASH for writing things like universal <strong>installers</strong>, a.k.a. <strong>setup scripts</strong>, <strong>uploaders</strong>, wrappers for all sorts of functionality, such as <strong>NPM</strong>, <strong>rbenv</strong>, installing gems, rubies, using AWS, deploying code, etc.</p>
</li>
<li class="data-line-32">
<p>BASH function&#8217;s return values lend themselves nicely to a compact DSL (<a href="https://en.wikipedia.org/wiki/Domain-specific_language">domain specific language</a>) where multiple functions can be chained by logical AND <code>&amp;&amp;</code> and OR <code>||</code> to provide a very compact execution logic. Most importantly, we think that this logic is <strong>extremely easy to read and understand.</strong></p>
</li>
</ul>
</div>
<div class="paragraph data-line-34">
<p>Despite the above points, it is also generally accepted that:</p>
</div>
<div class="ulist data-line-36">
<ul>
<li class="data-line-36">
<p>A lot of BASH scripts are very poorly written and hard to read and understand.</p>
</li>
<li class="data-line-37">
<p>It&#8217;s often difficult to understand what the hell is going on while the script is running, because either its not outputting anything useful, OR it&#8217;s outputting way too much.</p>
</li>
<li class="data-line-38">
<p>When BASH errors occur, shit generally hits the fan and someone decides that they should rewrite the 20-line BASH script in C&#43;&#43; or Go, because, well, it&#8217;s a goddamn BASH script and it ain&#8217;t working.</p>
</li>
</ul>
</div>
<div class="admonitionblock important data-line-40">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<em>Bashmatic</em>'s goal is to make BASH programming both fun, consistent, and provide plenty of visible output to the user so that there is no mystery as to what is going on.
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-42">
<p><strong>Why do we need another BASH framework?</strong></p>
</div>
<div class="paragraph data-line-44">
<p>BASH is know to be too verbose and unreliable. We beg to differ. This is why we wanted to start this README with a couple of examples.</p>
</div>
</div>
</div>
<div class="sect1 data-line-46">
<h2 id="_three_examples_to_showcase_bashmatic">2. Three Examples to Showcase Bashmatic</h2>
<div class="sectionbody">
<div class="sect2 data-line-48">
<h3 id="_install_gems_via_homebrew">2.1. Install Gems via Homebrew</h3>
<div class="paragraph data-line-50">
<p>Just look at this tiny, five-line script:</p>
</div>
<div class="listingblock data-line-53">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/usr/bin/env bash
source ~/.bashmatic/init.sh

h2 "Installing ruby gem sym and brew package curl..." \
   "Please standby..."
gem.install "sym" &amp;&amp; brew.install.package "curl" &amp;&amp; \
  success "installed sym ruby gem, version $(gem.version sym)"</code></pre>
</div>
</div>
<div class="paragraph data-line-63">
<p>Results in this detailed and, let&#8217;s be honest, <em>gorgeous</em> ASCII output:</p>
</div>
<div class="imageblock data-line-65">
<div class="content">
<img src=".bashmatic-example.png" alt="example" width="80%">
</div>
</div>
<div class="paragraph data-line-67">
<p>Tell me you are not at all excited to start writing complex installation flows in BASH right away?</p>
</div>
<div class="paragraph data-line-69">
<p>Not only you get pretty output, but you can each executed command, it&#8217;s exit status, whether it&#8217;s been successful (green/red), as well each command&#8217;s bloody duration in milliseconds. What&#8217;s not to like?!? üòÇ</p>
</div>
<div class="paragraph data-line-71">
<p>Still not convinced?</p>
</div>
<div class="paragraph data-line-73">
<p>Take a look at a more comprehensive example next.</p>
</div>
</div>
<div class="sect2 data-line-75">
<h3 id="_download_and_install_binaries">2.2. Download and install binaries.</h3>
<div class="paragraph data-line-77">
<p>In this example, we&#8217;ll download and install binaries <code>kubectl</code> and <code>minikube</code> binaries into <code>/usr/local/bin</code></p>
</div>
<div class="paragraph data-line-79">
<p>We provided an example script in <a href="examples/k8s-installer.sh"><code>examples/k8s-installer.sh</code></a>. Please click and take a look at the source.</p>
</div>
<div class="paragraph data-line-81">
<p>Here is the output of running this script:</p>
</div>
<div class="imageblock data-line-83">
<div class="content">
<img src=".k8installer.png" alt=".k8installer.png" width="80%">
</div>
</div>
<div class="paragraph data-line-85">
<p>Why do we think this type of installer is pretty awesome, compared to a silent but deadly shell script that "Jim-in-the-corner" wrote and now nobody understands?</p>
</div>
<div class="paragraph data-line-87">
<p>Because:</p>
</div>
<div class="olist arabic data-line-89">
<ol class="arabic">
<li class="data-line-89">
<p>The script goes out of its way to over-communicate what it does to the user.</p>
</li>
<li class="data-line-90">
<p>It allows and reminds about a clean getaway (Ctrl-C)</p>
</li>
<li class="data-line-91">
<p>It shares the exact command it runs and its timings so that you can eyeball issues like network congestions or network addresses, etc.</p>
</li>
<li class="data-line-92">
<p>It shows in green exit code '0' of each command. Should any of the commands fail, you&#8217;ll see it in red.</p>
</li>
<li class="data-line-93">
<p>It&#8217;s source code is terse, explicit, and easy to read. There is no magic. Just BASH functions.</p>
</li>
</ol>
</div>
<div class="admonitionblock note data-line-95">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you need to create a BASH installer, <em>Bashmatic¬Æ</em> offers some incredible time savers.
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-97">
<p>Let&#8217;s get back to the Earth, and talk about how to install Bashmatic, and how to use it in more detail right after.</p>
</div>
</div>
<div class="sect2 data-line-99">
<h3 id="_developer_environment_bootstrap_script">2.3. Developer Environment Bootstrap Script</h3>
<div class="paragraph data-line-101">
<p>This final and most feature-rich example is not just an example&#8201;&#8212;&#8201;<strong>it&#8217;s a working functioning tool that can be used to install a bunch of developer dependencies on your Apple Laptop</strong>.</p>
</div>
<div class="admonitionblock note data-line-103">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the script relies on Homebrew behind the scenes, and therefore would not work on Linux or Windows (unless Brew gets ported there).
</td>
</tr>
</table>
</div>
<div class="paragraph data-line-105">
<p>It&#8217;s located in <a href="https://github.com/kigster/bashmatic/blob/master/bin/dev-setup"><code>bin/dev-setup</code></a> and has many CLI flags:</p>
</div>
<div class="imageblock data-line-107">
<div class="content">
<img src=".dev-setup.png" alt="dev-setup.png" width="80%">
</div>
</div>
<div class="paragraph data-line-109">
<p>Here are a couple of ways to run it:</p>
</div>
<div class="sect3 data-line-111">
<h4 id="_example_3_1_dev_tools_postgresql_redismemcached_ruby_2_7_1_nodejsnpmyarn">2.3.1. Example 3.1 Dev Tools + PostgreSQL + Redis/Memcached + Ruby 2.7.1 + NodeJS/NPM/Yarn</h4>
<div class="paragraph data-line-113">
<p>In this example we&#8217;ll install the above mentioned tools in one command. We&#8217;ll run this from a folder where our application is installed, because then the Ruby Version will be auto-detected from our <code>.ruby-version</code> file, and in addition to installing all the dependencies the script will also run <code>bundle install</code> and <code>npm install</code> (or <code>yarn install</code>). Not bad, huh?</p>
</div>
<div class="listingblock data-line-116">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">~/.bashmatic/bin/dev-setup \
  -g "ruby postgres mysql caching js monitoring" \
  -r $(cat .ruby-version) \
  -p 9.5 \ # use PostgreSQL version 9.5
  -m 5.6   # use MySQL version 5.6</code></pre>
</div>
</div>
<div class="paragraph data-line-124">
<p>This compact command line installs a ton of things, but don&#8217;t take our word for it ‚Äî run it yourself. Or, at the very least enjoy this <a href="https://github.com/kigster/bashmatic/blob/master/.dev-setup-completed.png">one extremely long screenshot</a> :)</p>
</div>
</div>
<div class="sect3 data-line-126">
<h4 id="_example_4_the_final_example_installs_grc_colourify_tool_that_makes_your_terminal_very_colorful">2.3.2. Example 4. The final example installs GRC Colourify Tool that makes your terminal very colorful.</h4>
<div class="paragraph data-line-128">
<p>Run it like so:</p>
</div>
<div class="listingblock data-line-131">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">~/.bashmatic/bin/install-grc</code></pre>
</div>
</div>
<div class="paragraph data-line-133">
<p>You might need to enter your password for SUDO.</p>
</div>
<div class="paragraph data-line-135">
<p>Once it completes, run <code>source ~/.bashrc</code> (or whatever shell you use), and type something like <code>ls -al</code> or <code>netstat -rn</code> or <code>ping 1.1.1.1</code> and notice how all of the above is nicely colored.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-137">
<h2 id="_installing_bashmatic">3. Installing Bashmatic</h2>
<div class="sectionbody">
<div class="paragraph data-line-139">
<p>Perhaps the easiest way to install <em>Bashmatic¬Æ</em> is using this boot-strapping script.</p>
</div>
<div class="sect2 data-line-141">
<h3 id="_bootstrapping_bashmatic_using_curl">3.1. Bootstrapping <em>Bashmatic¬Æ</em> using <code>curl</code></h3>
<div class="paragraph data-line-143">
<p>First, make sure that you have Curl installed, run <code>which curl</code> to see. Then copy/paste this command into your Terminal (NOTE: you can change 1-2-0 to a version you&#8217;d like to install):</p>
</div>
<div class="listingblock data-line-146">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bash -c "$(curl -fsSL https://bit.ly/bashmatic-1-2-0)"</code></pre>
</div>
</div>
<div class="paragraph data-line-150">
<p>This not only will check out <em>bashmatic¬Æ</em> into <code>~/.bashmatic</code>, but will also add the enabling hook to your <code>~/.bashrc</code> file.</p>
</div>
<div class="paragraph data-line-152">
<p>Restart your shell, and make sure that when you type <code>bashmatic.version</code> in the command line (and press Enter) you see the version number printed like so:</p>
</div>
<div class="listingblock data-line-155">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.version
1.0.0</code></pre>
</div>
</div>
<div class="paragraph data-line-160">
<p>If you get an error, perhaps <em>Bashmatic¬Æ</em> did not properly install.</p>
</div>
</div>
<div class="sect2 data-line-162">
<h3 id="_installing_manually">3.2. Installing Manually</h3>
<div class="paragraph data-line-164">
<p>For the impatient, here is how to install <em>Bashmatic¬Æ</em> very quickly and easily. You can add the following script to your <code>~/.bashrc</code>  or any other script:</p>
</div>
<div class="listingblock data-line-167">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[[ -d ${HOME}/.bashmatic ]] || {
  git clone https://github.com/kigster/bashmatic.git ~/.bashmatic
}
source ~/.bashmatic/init.sh</code></pre>
</div>
</div>
<div class="paragraph data-line-175">
<p>Finally, to ensure <em>Bashmatic¬Æ</em> loads every time you login, run the following command:</p>
</div>
<div class="listingblock data-line-178">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bashmatic.load-at-login</code></pre>
</div>
</div>
<div class="paragraph data-line-182">
<p>When you run the <code>bashmatic.load-at-login</code> function, it will add a <em>bashmatic¬Æ</em> hook to one of your BASH initialization files, so all of its functions are available in your shell.</p>
</div>
<div class="paragraph data-line-184">
<p>Note&#8201;&#8212;&#8201;you can always reload <em>Bashmatic¬Æ</em> with <code>bashmatic.reload</code> function.</p>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-186">
<h2 id="_usage">4. Usage</h2>
<div class="sectionbody">
<div class="paragraph data-line-188">
<p>Welcome to <strong>Bashmatic</strong>&#8201;&#8212;&#8201;an ever growing collection of scripts and mini-bash frameworks for doing all sorts of things quickly and efficiently.</p>
</div>
<div class="paragraph data-line-190">
<p>We have adopted the <a href="https://google.github.io/styleguide/shell.xml">Google Bash Style Guide</a>, and it&#8217;s recommended that anyone committing to this repo reads the guides to understand the conventions, gotchas and anti-patterns.</p>
</div>
<div class="sect2 data-line-192">
<h3 id="_function_naming_convention_unpacked">4.1. Function Naming Convention Unpacked</h3>
<div class="paragraph data-line-194">
<p><em>Bashmatic¬Æ</em> provides a large number of functions, which are all loaded in your current shell. The functions are split into two fundamental groups:</p>
</div>
<div class="ulist data-line-196">
<ul>
<li class="data-line-196">
<p>Functions with names beginning with a <code>.</code> are considered "private" functions, for example <code>.run.env</code> and <code>.run.initializer</code></p>
</li>
<li class="data-line-197">
<p>All other functions are considered public.</p>
</li>
</ul>
</div>
<div class="paragraph data-line-199">
<p>The following conventions apply to all functions:</p>
</div>
<div class="ulist data-line-201">
<ul>
<li class="data-line-201">
<p>We use the "dot" for separating namespaces, hence <code>git.sync</code> and <code>gem.install</code>.</p>
</li>
<li class="data-line-202">
<p>Function names should be self-explanatory and easy to read.</p>
</li>
<li class="data-line-203">
<p>DO NOT abbreviate words.</p>
</li>
<li class="data-line-204">
<p>All public functions must be written defensively: i.e. if the function is called from the Terminal without any arguments, and it requires arguments, the function <em>must print its usage info</em> and a meaningful error message.</p>
</li>
</ul>
</div>
<div class="paragraph data-line-206">
<p>For instance:</p>
</div>
<div class="listingblock data-line-209">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ gem.install
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ¬´ ERROR ¬ª  Error ‚Äî gem name is required as an argument          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>
</div>
</div>
<div class="paragraph data-line-216">
<p>Now let&#8217;s run it properly:</p>
</div>
<div class="listingblock data-line-219">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ gem.install simple-feed
       installing simple-feed (latest)...
  ‚úîÔ∏é    ‚ùØ gem install simple-feed   ‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™„Äî   5685 ms „Äï    0
  ‚úîÔ∏é    ‚ùØ gem list &gt; /tmp/.bashmatic/.gem/gem.list ‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™„Äî    503 ms „Äï    0</code></pre>
</div>
</div>
<div class="paragraph data-line-226">
<p>The naming convention we use is a derivative of Google&#8217;s Bash StyleGuide, using <code>.</code> to separate BASH function namespaces instead of much more verbose <code>::</code>.</p>
</div>
</div>
<div class="sect2 data-line-228">
<h3 id="_seeing_all_functions">4.2. Seeing All Functions</h3>
<div class="paragraph data-line-230">
<p>After running the above, run <code>bashmatic.functions</code> function to see all available functions. You can also open the <a href="FUNCTIONS.html">FUNCTIONS.adoc</a> file to see the alphabetized list of all 422 functions.</p>
</div>
</div>
<div class="sect2 data-line-232">
<h3 id="_seeing_specific_functions">4.3. Seeing Specific Functions</h3>
<div class="paragraph data-line-234">
<p>To get a list of module or pattern-specific functions installed by the framework, run the following:</p>
</div>
<div class="listingblock data-line-237">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from pattern [ columns ]</code></pre>
</div>
</div>
<div class="paragraph data-line-241">
<p>For instance:</p>
</div>
<div class="listingblock data-line-244">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from docker 2
docker.abort-if-down                    docker.build.container
docker.actions.build                    docker.containers.clean
.......
docker.actions.update</code></pre>
</div>
</div>
</div>
<div class="sect2 data-line-252">
<h3 id="_various_modules">4.4. Various Modules</h3>
<div class="paragraph data-line-254">
<p>You can list various modules by listing the <code>lib</code> sub-directory of the <code>~/.bashmatic</code> folder.</p>
</div>
<div class="paragraph data-line-256">
<p>Note how we use <em>Bashmatic¬Æ</em> helper <code>columnize [ columns ]</code> to display a long list in five columns.</p>
</div>
<div class="listingblock data-line-259">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ ls -1 ~/.bashmatic/lib | sed 's/\.sh//g' | columnize 5
7z                deploy            jemalloc          runtime-config    time
array             dir               json              runtime           trap
audio             docker            net               set               url
aws               file              osx               set               user
bashmatic         ftrace            output            settings          util
brew              gem               pids              shell-set         vim
caller            git-recurse-updat progress-bar      ssh               yaml
color             git               ruby              subshell
db                sedx             run               sym</code></pre>
</div>
</div>
</div>
<div class="sect2 data-line-272">
<h3 id="_key_modules_explained">4.5. Key Modules Explained</h3>
<div class="paragraph data-line-274">
<p>At a high level, the following modules are provided, in order of importance:</p>
</div>
<div class="sect3 data-line-276">
<h4 id="_1_runtime">4.5.1. 1. Runtime</h4>
<div class="paragraph data-line-278">
<p>The following files provide this functionality:</p>
</div>
<div class="ulist data-line-280">
<ul>
<li class="data-line-280">
<p><code>lib/run.sh</code></p>
</li>
<li class="data-line-281">
<p><code>lib/runtime.sh</code></p>
</li>
<li class="data-line-282">
<p><code>lib/runtime-config.sh</code>.</p>
</li>
</ul>
</div>
<div class="paragraph data-line-284">
<p>These collectively offer the following functions:</p>
</div>
<div class="listingblock data-line-287">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from 'run*'

run                                            run.set-next
run.config.detail-is-enabled                   run.set-next.list
run.config.verbose-is-enabled                  run.ui.ask
run.inspect                                    run.ui.ask-user-value
run.inspect-variable                           run.ui.get-user-value
run.inspect-variables                          run.ui.press-any-key
run.inspect-variables-that-are                 run.ui.retry-command
run.inspect.set-skip-false-or-blank            run.variables-ending-with
run.on-error.ask-is-enabled                    run.variables-starting-with
run.print-variable                             run.with.minimum-duration
run.print-variables                            run.with.ruby-bundle
run.set-all                                    run.with.ruby-bundle-and-output
run.set-all.list</code></pre>
</div>
</div>
<div class="paragraph data-line-305">
<p>Using these functions you can write powerful shell scripts that display each command they run, it&#8217;s status, duration, and can abort on various conditions. You can ask the user to confirm, and you can show a user message and wait for any key pressed to continue.</p>
</div>
<div class="paragraph data-line-307">
<p>To learn more about this key module, please go to the <a href="#runtime-framework">Runtime Framework</a> section.</p>
</div>
<div class="sect4 data-line-309">
<h5 id="_runtime_framework_in_depth">Runtime Framework in Depth</h5>
<div class="paragraph data-line-311">
<p>One of the core tenets of this library is it&#8217;s "runtime" framework, which offers a way to run and display commands as they run, while having a fine-grained control over the following:</p>
</div>
<div class="ulist data-line-313">
<ul>
<li class="data-line-313">
<p>What happens when one of the commands fails? Options include:</p>
<div class="ulist data-line-314">
<ul>
<li class="data-line-314">
<p>Ignore and continue (default)&#8201;&#8212;&#8201;<em>continue-on-error</em></p>
</li>
<li class="data-line-315">
<p>Ask the user if she wants to proceed&#8201;&#8212;&#8201;<em>ask-on-error</em></p>
</li>
<li class="data-line-316">
<p>Abort the entire run&#8201;&#8212;&#8201;<em>abort-on-error</em>.</p>
</li>
</ul>
</div>
</li>
<li class="data-line-317">
<p>How is command output displayed?</p>
<div class="ulist data-line-318">
<ul>
<li class="data-line-318">
<p>Is it swallowed for compactness, and only shown if there is an error? (default)&#8201;&#8212;&#8201;<em>show-output-off</em></p>
</li>
<li class="data-line-319">
<p>Or is it shown regardless?&#8201;&#8212;&#8201;<em>show-output-on</em></p>
</li>
</ul>
</div>
</li>
<li class="data-line-320">
<p>Should commands actually run (<em>dry-run-off</em>), or simply be printed? (<em>dry-run-on</em>).</p>
</li>
</ul>
</div>
</div>
<div class="sect4 data-line-322">
<h5 id="_examples_of_runtime_framework">Examples of Runtime Framework</h5>
<div class="quoteblock data-line-324">
<blockquote>
<div class="paragraph data-line-325">
<p>NOTE, in the following examples we assume you installed the library into your project&#8217;s folder as <code>.bashmatic</code> (a "hidden" folder starting with a dot).</p>
</div>
</blockquote>
</div>
<div class="paragraph data-line-328">
<p>Programming style used in this project lends itself nicely to using a DSL-like approach to shell programming.  For example, in order to configure the behavior of the run-time framework (see below) you would run the following command:</p>
</div>
<div class="listingblock data-line-331">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/usr/bin/env bash

# (See below on the location of .bashmatic and ways to install it)
source ~/.bashmatic/init.sh

# configure global behavior of all run() invocations
run.set-all abort-on-error show-output-off

run "git clone https://gthub.com/user/rails-repo rails"
run "cd rails"
run "bundle check || bundle install"

# the following configuration only applies to the next invocation of `run()`
# and then resets back to `off`
run.set-next show-output-on
run "bundle exec rspec"</code></pre>
</div>
</div>
<div class="paragraph data-line-350">
<p>And most importantly, you can use our fancy UI drawing routines to communicate with the user, which are based on familiar HTML constructs, such as <code>h1</code>, <code>h2</code>, <code>hr</code>, etc.</p>
</div>
</div>
</div>
<div class="sect3 data-line-352">
<h4 id="_2_output_modules">4.5.2. 2. Output Modules</h4>
<div class="paragraph data-line-354">
<p>The <code>lib/output.sh</code> module does all of the heavy lifting with providing many UI elements, such as frames, boxes, lines, headers, and many more.</p>
</div>
<div class="paragraph data-line-356">
<p>Here is the list of functions in this module:</p>
</div>
<div class="listingblock data-line-359">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from output 3
abort                          error:                         left-prefix
ascii-clean                    h.black                        ok
box.blue-in-green              h.blue                         okay
box.blue-in-yellow             h.green                        output.color.off
box.green-in-cyan              h.red                          output.color.on
box.green-in-green             h.yellow                       output.is-pipe
box.green-in-magenta           h1                             output.is-redirect
box.green-in-yellow            h1.blue                        output.is-ssh
box.magenta-in-blue            h1.green                       output.is-terminal
box.magenta-in-green           h1.purple                      output.is-tty
box.red-in-magenta             h1.red                         puts
box.red-in-red                 h1.yellow                      reset-color
box.red-in-yellow              h2                             reset-color:
box.yellow-in-blue             h2.green                       screen-width
box.yellow-in-red              h3                             screen.height
box.yellow-in-yellow           hdr                            screen.width
br                             hl.blue                        shutdown
center                         hl.desc                        stderr
columnize                      hl.green                       stdout
command-spacer                 hl.orange                      success
cursor.at.x                    hl.subtle                      test-group
cursor.at.y                    hl.white-on-orange             ui.closer.kind-of-ok
cursor.down                    hl.white-on-salmon             ui.closer.kind-of-ok:
cursor.left                    hl.yellow                      ui.closer.not-ok
cursor.rewind                  hl.yellow-on-gray              ui.closer.not-ok:
cursor.right                   hr                             ui.closer.ok:
cursor.up                      hr.colored                     warn
debug                          inf                            warning
duration                       info                           warning:
err                            info:
error                          left</code></pre>
</div>
</div>
<div class="paragraph data-line-394">
<p>Note that some function names end with <code>:</code>&#8201;&#8212;&#8201;this indicates that the function outputs a new-line in the end. These functions typically exist together with their non-<code>:</code>-terminated counter-parts.  If you use one, eg, <code>inf</code>, you are then supposed to finish the line by providing an additional output call, most commonly it will be one of <code>ok:</code>, <code>ui.closer.not-ok:</code> and <code>ui.closer.kind-of-ok:</code>.</p>
</div>
<div class="paragraph data-line-396">
<p>Here is an example:</p>
</div>
<div class="listingblock data-line-399">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">function valid-cask()  { sleep 1; return 0; }
function verify-cask() {
  inf "verifying brew cask ${1}...."
  if valid-cask ${1}; then
    ok:
  else
    not-ok:
  fi
}</code></pre>
</div>
</div>
<div class="paragraph data-line-411">
<p>When you run this, you should see something like this:</p>
</div>
<div class="listingblock data-line-414">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"> ‚ùØ verify-cask TextMate
  ‚úîÔ∏é    verifying brew cask TextMate....</code></pre>
</div>
</div>
<div class="paragraph data-line-419">
<p>In the above example, you see the checkbox appear to the left of the text. In fact, it appears a second after, right as <code>sleep 1</code> returns. This is because this paradigm is meant for wrapping constructs that might succeed or fail.</p>
</div>
<div class="paragraph data-line-421">
<p>If we change the <code>valid-cask</code> function to return a failure:</p>
</div>
<div class="listingblock data-line-424">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">function valid-cask()  { sleep 1; return 1; }</code></pre>
</div>
</div>
<div class="paragraph data-line-428">
<p>Then this is what we&#8217;d see:</p>
</div>
<div class="listingblock data-line-431">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ verify-cask TextMate
  ‚úò    verifying brew cask TextMate....</code></pre>
</div>
</div>
<div class="sect4 data-line-436">
<h5 id="_output_components">Output Components</h5>
<div class="paragraph data-line-438">
<p>Components are BASH functions that draw something concrete on the screen. For instance, all functions starting with <code>box.</code> are components, as are <code>h1</code>, <code>h2</code>, <code>hr</code>, <code>br</code> and more.</p>
</div>
<div class="listingblock data-line-441">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ h1 Hello

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Hello                                                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>
</div>
</div>
<div class="paragraph data-line-449">
<p>These are often named after HTML elements, such as <code>hr</code>, <code>h1</code>, <code>h2</code>, etc.</p>
</div>
</div>
<div class="sect4 data-line-451">
<h5 id="_output_helpers">Output Helpers</h5>
<div class="paragraph data-line-453">
<p>Here is another example where we are deciding whether to print something based on whether the output is a proper terminal (and not a pipe or redirect):</p>
</div>
<div class="listingblock data-line-455">
<div class="content">
<pre>output.is-tty &amp;&amp; h1 "Yay For Terminals!"</pre>
</div>
</div>
<div class="paragraph data-line-459">
<p>The above reads more like a high level language like Ruby or Python than Shell. That&#8217;s because BASH is more powerful than most people think.</p>
</div>
<div class="paragraph data-line-461">
<p>There is an <a href="examples/test-ui.sh">example script</a> that demonstrates the capabilities of Bashmatic.</p>
</div>
<div class="paragraph data-line-463">
<p>If you ran the script, you should see the output shown <a href=".bashmatic.png">in this screenshot</a>. Your colors may vary depending on what color scheme and font you use for your terminal.</p>
</div>
</div>
</div>
<div class="sect3 data-line-465">
<h4 id="_3_package_management_brew_and_rubygems">4.5.3. 3. Package management: Brew and RubyGems</h4>
<div class="paragraph data-line-467">
<p>You can reliably install ruby gems or brew packages with the following syntax:</p>
</div>
<div class="listingblock data-line-470">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/usr/bin/env bash

source ~/.bashmatic/init.sh

h2 "Installing ruby gem sym and brew package curl..." \
   "Please standby..."

gem.install sym
brew.install.package curl

success "installed Sym version $(gem.version sym)"</code></pre>
</div>
</div>
<div class="paragraph data-line-484">
<p>When you run the above script, you shyould seee the following output:</p>
</div>
<div class="imageblock data-line-486">
<div class="content">
<img src=".bashmatic-example.png" alt="example">
</div>
</div>
</div>
<div class="sect3 data-line-488">
<h4 id="_4_shortening_urls_and_github_access">4.5.4. 4. Shortening URLs and Github Access</h4>
<div class="paragraph data-line-490">
<p>You can shorten URLs on the command line using Bitly, but for this to work, you must set the following environment variables in your shell init:</p>
</div>
<div class="listingblock data-line-493">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">export BITLY_LOGIN="&lt;your login&gt;"
export BITLY_API_KEY="&lt;your api key&gt;"</code></pre>
</div>
</div>
<div class="paragraph data-line-498">
<p>Then you can run it like so:</p>
</div>
<div class="listingblock data-line-501">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ url.shorten https://raw.githubusercontent.com/kigster/bashmatic/master/bin/install
# http://bit.ly/2IIPNE1</code></pre>
</div>
</div>
<div class="sect4 data-line-506">
<h5 id="_github_access">Github Access</h5>
<div class="paragraph data-line-508">
<p>There are a couple of Github-specific helpers:</p>
</div>
<div class="listingblock data-line-511">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">github.clone                                   github.setup
github.org                                     github.validate</code></pre>
</div>
</div>
<div class="paragraph data-line-516">
<p>For instance:</p>
</div>
<div class="listingblock data-line-519">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ github.clone sym
  ‚úò    Validating Github Configuration...

       Please enter the name of your Github Organization:
       ‚ùØ kigster

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Your github organization was saved in your ~/.gitconfig file.                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ To change it in the future, run: github.org new-organization                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

  ‚úîÔ∏é    ‚ùØ git clone git@github.com:kigster/sym ‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™‚ñ™„Äî    931 ms „Äï    0</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3 data-line-535">
<h4 id="_5_file_helpers">4.5.5. 5. File Helpers</h4>
<div class="listingblock data-line-538">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from file

file.exists_and_newer_than                    file.list.filter-non-empty
file.gsub                                     file.size
file.install-with-backup                      file.size.mb
file.last-modified-date                       file.source-if-exists
file.last-modified-year                       file.stat
file.list.filter-existing</code></pre>
</div>
</div>
<div class="paragraph data-line-549">
<p>For instance, <code>file.stat</code> offers access to the <code>fstat()</code> C-function:</p>
</div>
<div class="listingblock data-line-552">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"> ‚ùØ file.stat README.md st_size
22799</code></pre>
</div>
</div>
</div>
<div class="sect3 data-line-557">
<h4 id="_6_array_helpers">4.5.6. 6. Array Helpers</h4>
<div class="listingblock data-line-560">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from array

array.to.bullet-list                             array.includes
array.has-element                        array.includes-or-exit
array.to.csv                                     array.from.stdin
array-join                                    array.join
array-piped                                   array.to.piped-list
array.includes-or-complain</code></pre>
</div>
</div>
<div class="paragraph data-line-571">
<p>For instance:</p>
</div>
<div class="listingblock data-line-574">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ declare -a farm_animals=(chicken duck rooster pig)
‚ùØ array.to.bullet-list ${farm_animals[@]}
 ‚Ä¢ chicken
 ‚Ä¢ duck
 ‚Ä¢ rooster
 ‚Ä¢ pig
‚ùØ array.includes "duck" "${farm_animals[@]}" &amp;&amp; echo Yes || echo No
Yes
‚ùØ array.includes  "cow" "${farm_animals[@]}" &amp;&amp; echo Yes || echo No
No</code></pre>
</div>
</div>
</div>
<div class="sect3 data-line-587">
<h4 id="_7_utilities">4.5.7. 7. Utilities</h4>
<div class="paragraph data-line-589">
<p>The utilities module has the following functions:</p>
</div>
<div class="listingblock data-line-592">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from util

pause.long                                    util.install-direnv
pause                                         util.is-a-function
pause.short                                   util.is-numeric
pause.medium                                util.is-variable-defined
util.append-to-init-files                     util.lines-in-folder
util.arch                                     util.remove-from-init-files
util.call-if-function                         util.shell-init-files
util.checksum.files                           util.shell-name
util.checksum.stdin                           util.ver-to-i
util.functions-starting-with                       util.whats-installed
util.generate-password                        watch.ls-al</code></pre>
</div>
</div>
<div class="paragraph data-line-608">
<p>For example, version helpers can be very handy in automated version detection, sorting and identifying the latest or the oldest versions:</p>
</div>
<div class="listingblock data-line-611">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ util.ver-to-i '12.4.9'
112004009
‚ùØ util.i-to-ver $(util.ver-to-i '12.4.9')
12.4.9</code></pre>
</div>
</div>
</div>
<div class="sect3 data-line-618">
<h4 id="_8_ruby_and_ruby_gems">4.5.8. 8. Ruby and Ruby Gems</h4>
<div class="paragraph data-line-620">
<p>Ruby helpers abound:</p>
</div>
<div class="listingblock data-line-623">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from ruby

bundle.gems-with-c-extensions                 ruby.install-ruby-with-deps
interrupted                                   ruby.install-upgrade-bundler
ruby.bundler-version                          ruby.installed-gems
ruby.compiled-with                            ruby.kigs-gems
ruby.default-gems                             ruby.linked-libs
ruby.full-version                             ruby.numeric-version
ruby.gemfile-lock-version                     ruby.rbenv
ruby.gems                                     ruby.rubygems-update
ruby.gems.install                             ruby.stop
ruby.gems.uninstall                           ruby.top-versions
ruby.init                                     ruby.top-versions-as-yaml
ruby.install                                  ruby.validate-version
ruby.install-ruby</code></pre>
</div>
</div>
<div class="paragraph data-line-641">
<p>From the obvious <code>ruby.install-ruby &lt;version&gt;</code> to incredibly useful <code>ruby.top-versions &lt;platform&gt;</code>&#8201;&#8212;&#8201;which, using rbenv and ruby_build plugin, returns the most recent minor version of each major version upgrade, as well as the YAML version that allows you to pipe the output into your <code>.travis.yml</code> to test against each major version of Ruby, locked to the very latest update in each.</p>
</div>
<div class="listingblock data-line-644">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ ruby.top-versions
2.0.0-p648
2.1.10
2.2.10
2.3.8
2.4.9
2.5.7
2.6.5
2.7.0
2.8.0-dev

‚ùØ ruby.top-versions jruby
jruby-1.5.6
jruby-1.6.8
jruby-1.7.27
jruby-9.0.5.0
jruby-9.1.17.0
jruby-9.2.10.0

‚ùØ ruby.top-versions mruby
mruby-dev
mruby-1.0.0
mruby-1.1.0
mruby-1.2.0
mruby-1.3.0
mruby-1.4.1
mruby-2.0.1
mruby-2.1.0</code></pre>
</div>
</div>
<div class="sect4 data-line-675">
<h5 id="_gem_helpers">Gem Helpers</h5>
<div class="paragraph data-line-677">
<p>These are fun helpers to assist in scripting gem management.</p>
</div>
<div class="listingblock data-line-680">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ bashmatic.functions-from gem

g-i                                           gem.gemfile.version
g-u                                           gem.global.latest-version
gem.cache-installed                           gem.global.versions
gem.cache-refresh                             gem.install
gem.clear-cache                               gem.is-installed
gem.configure-cache                           gem.uninstall
gem.ensure-gem-version                        gem.version</code></pre>
</div>
</div>
<div class="paragraph data-line-692">
<p>For instance</p>
</div>
<div class="listingblock data-line-695">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">‚ùØ g-i awesome_print
  ‚úîÔ∏é    gem awesome_print (1.8.0) is already installed
‚ùØ gem.version awesome_print
1.8.0</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3 data-line-702">
<h4 id="_9_additional_helpers">4.5.9. 9. Additional Helpers</h4>
<div class="paragraph data-line-704">
<p>There are plenty more modules, that help with:</p>
</div>
<div class="ulist data-line-706">
<ul>
<li class="data-line-706">
<p><a href="lib/ruby.sh">Ruby Version Helpers</a> and (Ruby Gem Helpers)[lib/gem.sh], that can extract curren gem version from either <code>Gemfile.lock</code> or globally installed gem list..</p>
</li>
<li class="data-line-707">
<p><a href="lib/aws.sh">AWS helpers</a>&#8201;&#8212;&#8201;requires <code>awscli</code> and credentials setup, and offers some helpers to simplify AWS management.</p>
</li>
<li class="data-line-708">
<p><a href="lib/docker.sh">Docker Helpers</a>&#8201;&#8212;&#8201;assist with docker image building and pushing/pulling</p>
</li>
<li class="data-line-709">
<p><a href="lib/sym.sh">Sym</a>&#8201;&#8212;&#8201;encryption with the gem called <a href="https://github.com/kigster/sym"><code>sym</code></a></p>
</li>
</ul>
</div>
<div class="paragraph data-line-711">
<p>And many more.</p>
</div>
<div class="paragraph data-line-713">
<p>See the full function index with the function implementation body in the <a href="FUNCTIONS.html">FUNCTIONS.adoc</a> index.</p>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-717">
<h2 id="_how_to">5. How To&#8230;&#8203;</h2>
<div class="sectionbody">
<div class="sect2 data-line-719">
<h3 id="_write_new_dsl_in_the_bashmatic_style">5.1. Write new DSL in the <em>Bashmatic¬Æ</em> Style</h3>
<div class="paragraph data-line-721">
<p>The following example is the actual code from a soon to be integrated AWS credentials install script. This code below checks that a user has a local <code>~/.aws/credentials</code> file needed by the <code>awscli</code>, and in the right INI format. If it doesn&#8217;t find it, it checks for the access key CSV file in the <code>~/Downloads</code> folder, and converts that if found. Now, if even that is not found, it prompts the user with instructions on how to generate a new key pair on AWS IAM website, and download it locally, thereby quickly converting and installing it as a proper credentials file. Not bad, for a compact BASH script, right? (of course, you are not seeing all of the involved functions, only the public ones).</p>
</div>
<div class="listingblock data-line-724">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># define a new function in AWS namespace, related to credentials.
# name of the function is self-explanatory: it validates credentials
# and exits if they are invalid.
aws.credentials.validate-or-exit() {
  aws.credentials.are-valid || {
    aws.credentials.install-if-missing || bashmatic.exit-or-return 1
  }
}

aws.credentials.install-if-missing() {
  aws.credentials.are-present || { # if not present
    aws.access-key.is-present || aws.access-key.download # attempt to download the key
    aws.access-key.is-present &amp;&amp; aws.credentials.check-downloads-folder # attempt to find it in ~/Downloads
  }

  aws.credentials.are-present || { # final check after all attempts to install credentials
    error "Unable to find AWS credentials. Please try again." &amp;&amp; bashmatic.exit-or-return 1
  }

   bashmatic.exit-or-return 0
}</code></pre>
</div>
</div>
<div class="paragraph data-line-748">
<p>Now, <strong>how would you use it in a script?</strong> Let&#8217;s say you need a script to upload
something to AWS S3. But before you begin, wouldn&#8217;t it be nice to verify
that the credentials exist, and if not&#8201;&#8212;&#8201;help the user install it? Yes it would.</p>
</div>
<div class="paragraph data-line-752">
<p>And that is exactly what the code above does, but it looks like a DSL. because
it <em>is</em> a DSL.</p>
</div>
<div class="paragraph data-line-755">
<p>This script could be your <code>bin/s3-uploader</code></p>
</div>
<div class="listingblock data-line-758">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">aws.credentials.validate-or-exit
# if we are here, that means that AWS credentials have been found.
# and we can continue with our script.</code></pre>
</div>
</div>
</div>
<div class="sect2 data-line-766">
<h3 id="_how_can_i_test_if_the_function_was_ran_as_part_of_a_script_or_sourced_in">5.2. How can I test if the function was ran as part of a script, or "sourced-in"?</h3>
<div class="paragraph data-line-768">
<p>Some bash files exists as libraries to be "sourced in", and others exist as scripts to be run. But users won&#8217;t always know what is what, and may try to source in a script that should be run, or vice versa ‚Äî run a script that should be sourced in.</p>
</div>
<div class="paragraph data-line-770">
<p>What do you, programmer, do to educate the user about correct usage of your script/library?</p>
</div>
<div class="paragraph data-line-772">
<p><em>Bashmatic¬Æ</em> offers a reliable way to test this:</p>
</div>
<div class="listingblock data-line-775">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/usr/bin/env bash
# load library
if [[ -f "${Bashmatic__Init}" ]]; then source "${Bashmatic__Init}"; else source ~/.bashmatic/init.sh; fi
bashmatic.validate-subshell || return 1</code></pre>
</div>
</div>
<div class="paragraph data-line-782">
<p>If you&#8217;rather require a library to be sourced in, but not run, use the code as follows:</p>
</div>
<div class="listingblock data-line-785">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/usr/bin/env bash
# load library
if [[ -f "${Bashmatic__Init}" ]]; then source "${Bashmatic__Init}"; else source ~/.bashmatic/init.sh; fi
bashmatic.validate-sourced-in || exit 1</code></pre>
</div>
</div>
</div>
<div class="sect2 data-line-793">
<h3 id="_how_do_i_run_unit_tests_for_bashmatic">5.3. How do I run unit tests for Bashmatic?</h3>
<div class="paragraph data-line-795">
<p>The framework comes with a bunch of automated unit tests based on the fantastic framework <a href="https://github.com/sstephenson/bats.git"><code>bats</code></a>.</p>
</div>
<div class="paragraph data-line-797">
<p>To run all tests:</p>
</div>
<div class="listingblock data-line-800">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd ~/.bashmatic
bin/specs</code></pre>
</div>
</div>
<div class="paragraph data-line-805">
<p>While not every single function is tested (far from it), we do try to add tests to the critical ones.</p>
</div>
<div class="paragraph data-line-807">
<p>Please see <a href="https://github.com/kigster/bashmatic/tree/master/test">existing tests</a> for the examples.</p>
</div>
</div>
<div class="sect2 data-line-809">
<h3 id="_how_can_i_change_the_underscan_or_overscan_for_an_old_monitor">5.4. How can I change the underscan or overscan for an old monitor?</h3>
<div class="paragraph data-line-811">
<p>If you are stuck working on a monitor that does not support switching digit input from TV to PC, NOR does OS-X show the "underscan" slider in the Display Preferences, you may be forced to change the underscan manually. The process is a bit tricky, but we have a helpful script to do that:</p>
</div>
<div class="listingblock data-line-814">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ source init.sh
$ change-underscan 5</code></pre>
</div>
</div>
<div class="paragraph data-line-819">
<p>This will reduce underscan by 5% compared to the current value. The total value is 10000, and is stored in the file <code>/var/db/.com.apple.iokit.graphics</code>. The tricky part is determining which of the display entries map to your problem monitor. This is what the script helps with.</p>
</div>
<div class="paragraph data-line-821">
<p>Do not forget to restart after the change.</p>
</div>
<div class="paragraph data-line-823">
<p>Acknowledgements: the script is an automation of the method offered on <a href="http://ishan.co/external-monitor-underscan">this blog post</a>.</p>
</div>
</div>
<div class="sect2 data-line-825">
<h3 id="_contributing">5.5. Contributing</h3>
<div class="paragraph data-line-827">
<p>Submit a pull request!</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-06-26 15:01:44 -0700
</div>
</div>
</body>
</html>