#!/usr/bin/env bash
# vim: ft=bash

set +e

function src() {
  local file
  local code

  for file in "$@"; do
    [[ -z $file ]] && break
    
    if [[ -s "${file}" ]]; then
      ((BASHMATIC_DEBUG)) && printf "${BASHMATIC_PREFIX} sourcing ${txtgrn}%50s${clr}..." "${file}"
      source "${file}"
      code=$?
      ((BASHMATIC_DEBUG)) && {
        ((code)) && {
           printf "${txtred} [ ${bldred}X${txtred}, exit code=${code} ]${clr}\n"
           continue
        }
        printf "${txtgrn} [ ✔︎ OK] ${clr}\n"
      }
    else
      ((BASHMATIC_DEBUG)) && printf "${BASHMATIC_PREFIX} sourcing ${txtylw}%50s${clr}... ${txtylw}[ ${bldylw}X${txtylw}, file not found ]${clr}\n" "${file}"
    fi 
  done
  return 0
}

alias safe-source="src"
